<html>

<h1 id="start"></h1>


<div id="container"></div>

<p id="divider"></p>

</p><div id="results"></div>

<p id="end"></p>
<script>

// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#getting_data_into_and_out_of_an_event_listener

//Welcome message
document.getElementById("start").innerHTML = "Welcome to the Rock-paper-scissors game!";
const container = document.querySelector('#container');
const selectMessage = document.createElement('h3');
selectMessage.classList.add('InstructionText');
selectMessage.textContent = 'Select one of the options below: '
container.append(selectMessage);

// Buttons
let out;
const buttonRock = document.createElement('button');
buttonRock.classList.add('button');
buttonRock.textContent = 'Rock';
buttonRock.addEventListener('click', function() {out = playRound('Rock'); game(out)})
container.append(buttonRock);

const buttonPaper = document.createElement('button');
buttonPaper.classList.add('button');
buttonPaper.textContent = 'Paper';
buttonPaper.addEventListener('click', ()=> playRound('Paper'))
container.append(buttonPaper);

const buttonScissors = document.createElement('button');
buttonScissors.classList.add('button');
buttonScissors.textContent = 'Scissors';
buttonScissors.addEventListener('click', ()=> playRound('Scissors'))
container.append(buttonScissors);

//Displaying results
const results = document.getElementById('results');
results.innerHTML = ``;



function getComputerChoice(){
    
    let numericChoice = 0;
    let computerChoice = "";

    numericChoice = Math.floor(Math.random()*(3-0) + 1);

    switch (numericChoice) {

    case 1:
    computerChoice = "Rock"
    break;

    case 2:
    computerChoice = "Paper"
    break;
    
    case 3:
    computerChoice = "Scissors"
    break;
    
    default:
    console.log("error - check code")
    }
    
    console.log(numericChoice + " - " + computerChoice);

    return computerChoice;
}

function playRound(playerSelection){

    let computerSelection = getComputerChoice();

    console.log ("computer: " + computerSelection);
    console.log ("player: " + playerSelection);

    let result = "error";
    let computerScore = 0;
    let playerScore = 0;

    if (playerSelection.toLowerCase() == "rock")
    {
        if (computerSelection.toLowerCase() == "rock"){
            result = "Draw";
            computerScore = 0.5;
            playerScore = 0.5;
            console.log("Draw");
        }
    
        else if (computerSelection.toLowerCase() == "paper"){
            
            result = "Computer Wins";
            computerScore = 1;
            playerScore = 0;
            console.log("Computer wins");

        }
        else{
            result = "Player Wins"
            computerScore = 0;
            playerScore = 1;
            console.log("Player wins");

        }

    } 

    if (playerSelection.toLowerCase() == "paper")
    {
        if (computerSelection.toLowerCase() == "paper"){
            result = "Draw";
            computerScore = 0.5;
            playerScore = 0.5;
            console.log("Draw");
        }
    
        else if (computerSelection.toLowerCase() == "scissors"){
            
            result = "Computer Wins";
            computerScore = 1;
            playerScore = 0;
            console.log("Computer wins");

        }
        else{
            result = "Player Wins"
            computerScore = 0;
            playerScore = 1;
            console.log("Player wins");

        }

    }
    
    if (playerSelection.toLowerCase() == "scissors")
    {
        if (computerSelection.toLowerCase() == "scissors"){
            result = "Draw";
            computerScore = 0.5;
            playerScore = 0.5;
            console.log("Draw");
        }
    
        else if (computerSelection.toLowerCase() == "rock"){
            
            result = "Computer Wins";
            computerScore = 1;
            playerScore = 0;
            console.log("Computer wins");

        }
        else{
            result = "Player Wins"
            computerScore = 0;
            playerScore = 1;
            console.log("Player wins");

        }

    } 
    // console.log("Player - " + playerSelection + " " + playerScore + " : " + computerScore + " " + computerSelection + " - Computer")

    return [result, playerScore, computerScore, playerSelection, computerSelection];
    
}

let player_score = 0;
let computer_score = 0;
let counter =0;

function game(out){

    counter++;
        
    computer_score += out[2];
    player_score += out[1];

    if (computer_score<5 && player_score<5){


    results.innerHTML = `Game 3${counter}:You selected ${out[3]}, computer selected ${out[4]}. ${out[0]} --> score is Player:${player_score}, Computer: ${computer_score}`

    }
    else{

        if (computer_score>player_score){
            
            result = 'Computer Won!'
        }
        else if (computer_score==player_score){
            result = 'It\'s a draw'
        }
        else{
            result = 'Player Won!'
        }
        
        results.
        results.innerHTML = `GAME OVER: ${result}. Score is Player:${player_score}, Computer: ${computer_score}`
        newGame();
    }
}

function newGame()
{
    player_score = 0;
    computer_score = 0;
    counter =0;

}

</script>

 </html>
